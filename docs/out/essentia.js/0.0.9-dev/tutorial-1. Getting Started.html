<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>essentia.js: Tutorial: 1. Getting Started</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Tutorial: 1. Getting Started</h1>

    <section>

<header>
    

    <h2>1. Getting Started</h2>
</header>

<article>
    <h1>Getting started</h1>
<h2>Loading <code>essentia.js</code></h2>
<ul>
<li>
<h3>NPM users</h3>
</li>
</ul>
<pre class="prettyprint source lang-bash"><code>npm install essentia.js
</code></pre>
<pre class="prettyprint source lang-javascript"><code>var esentia = require('essentia.js');

// prints version of the essentia wasm backend
console.log(essentia.version)

// prints all the available algorithm methods in Essentia
console.log(essentia.algorithmNames)

let randomAudioData = [0.1, 0.023, -1 , 1, 0.5, 0.6];

let vectorData = essentia.arrayToVector(randomAudioData);

let output = essentia.LogAttackTime(vectorData);

// prints outputs of the algorithm
console.log(output.logAttackTime);
console.log(output.attackStop);
console.log(output.attackStop);
</code></pre>
<ul>
<li>
<h3>Using CDN</h3>
</li>
</ul>
<p>The following CDN links are available for <code>essentia.js</code>. You can also find the latest releases <a href="https://github.com/MTG/essentia.js/releases">here</a>.</p>
<ul>
<li>
<h4>HTML <code>&lt;script&gt;</code> tag</h4>
</li>
</ul>
<pre class="prettyprint source lang-html"><code>&lt;script src=&quot;https://unpkg.com/essentia.js@0.0.9-dev/dist/essentia-wasm.web.js&quot;>&lt;/script>
&lt;script src=&quot;https://unpkg.com/essentia.js@0.0.9-dev/dist/essentia.js-core.js&quot;>&lt;/script>
&lt;script src=&quot;https://unpkg.com/essentia.js@0.0.9-dev/dist/essentia.js-plot.js&quot;>&lt;/script>
&lt;script src=&quot;https://unpkg.com/essentia.js@0.0.9-dev/dist/essentia.js-extractor.js&quot;>&lt;/script>
</code></pre>
<ul>
<li>
<h4>ES6 style import</h4>
</li>
</ul>
<pre class="prettyprint source lang-javascript"><code>import Essentia from 'https://unpkg.com/essentia.js@0.0.9-dev/dist/essentia.js-core.esjs';
// import essentia-wasm-module
import { EssentiaModule } from 'https://unpkg.com/essentia.js@0.0.9-dev/dist/essentia-wasm.module.js';
  
let essentia = new Essentia(EssentiaModule);

// prints version of essentia wasm backend
console.log(essentia.version)

// prints all the available algorithm methods in Essentia
console.log(essentia.algorithmNames)
</code></pre>
<blockquote>
<p>NOTE: You shouldn't import the <code>essentia-wasm.module.js</code> on the main thread. The ideal way is to use it along with AudioWorklet design pattern.</p>
</blockquote>
<p>There are also some other ways for loading WebAssembly modules. Check https://developer.mozilla.org/en-US/docs/WebAssembly/Loading_and_running.</p>
<h2>Usages in Javscript</h2>
<p>After succesfully loading <code>essentia.js-core**</code> and <code>essentia-wasm.**</code> files on the JavaScript end, a typical usage would be like the following.</p>
<pre class="prettyprint source lang-javascript"><code>// create essentia object with all the methods to run various algorithms
// here we set essentia debug mode = false
let essentia = new Essentia(EssentiaModule);

// run an specific algorithm
let yourOutput = essentia.'&lt;your-essentia-algo>'(&lt;inputs> ..., &lt;parameters> (optional)...);

yourOutput.'&lt;your_output-key>'
</code></pre>
<p>As you can see, in contrary to essentia python bindings there are no seperate <code>configure</code> and <code>compute</code> methods in essentia.js since we bind both methods of essentia algorithms into one.</p>
<p>For example in real use-cases, it will look like below,</p>
<pre class="prettyprint source lang-javascript"><code>// Computing ReplayGain from an input audio signal vector
// The algorithm return float type
// check https://essentia.upf.edu/reference/std_ReplayGain.html
let outputAlgo = essentia.ReplayGain(inputSignalVector, // input
                                    44100); // sampleRate (parameter optional)


console.log(outputAlgo.replayGain);

// Running PitchYinProbabilistic algorithm on an input audio signal vector
// check https://essentia.upf.edu/reference/std_PitchYinProbabilistic.html
let output = essentia.PitchYinProbabilistic(inputSignalVector, // input
                                        // parameters (optional)
                                        4096, // frameSize
                                        256, // hopSize
                                        0.1, // lowRMSThreshold
                                        'zero', // outputUnvoiced,
                                        false, // preciseTime
                                        44100); //sampleRate

console.log(output);

let pitches = essentia.vectorToArray(output.pitch);
let voicedProbabilities = essentia.vectorToArray(output.voicedProbabilities);

console.log(pitch);
console.log(voicedProbabilities);
</code></pre>
<p>Similarly, you could use any of the algorithms specified in the <a href="https://mtg.github.io/essentia.js/docs/out/essentia.js/0.0.9-dev/">Essentia JS API</a>.</p>
<h2>Examples</h2>
<h3>Simple web example</h3>
<pre class="prettyprint source lang-html"><code>&lt;html lang=&quot;en&quot;>
  &lt;head>
    &lt;script src=&quot;https://unpkg.com/essentia.js@0.0.9-dev/dist/essentia-wasm.web.js&quot;>&lt;/script>
    &lt;script src=&quot;https://unpkg.com/essentia.js@0.0.9-dev/dist/essentia.js-core.js&quot;>&lt;/script>
    &lt;script>
      let essentia;

      EssentiaModule.then( function(EssentiaWasMModule) {
        essentia = new Essentia(EssentiaWasmModule);
        // prints version of the essentia wasm backend
        console.log(essentia.version)
        // prints all the available algorithms in essentia.js 
        console.log(essentia.algorithmNames);

        // add your custom audio feature extraction callbacks here
      });
    &lt;/script>
  &lt;/head>
&lt;/html>
</code></pre>
<blockquote>
<p>NOTE: The above code pattern runs the process on the main UI thread. For costly algorithms, we recommend you to use AudioWorklets instead.</p>
</blockquote>
<h3>Interactive demos: https://mtg.github.io/essentia.js/examples</h3>
<h3>Using WebAudioAPI with ScriptNodeProcessor.</h3>
<p>You can find some examples <a href="https://github.com/MTG/essentia.js/tree/master/examples/script-node-processor">here</a> on how to use essentia as a feature extractor using the depreciated <a href="https://developer.mozilla.org/en-US/docs/Web/API/ScriptProcessorNode"><code>ScriptNodeProcessor</code></a>.</p>
<h3>Using WebAudioAPI with AudioWorklets.</h3>
<p>You can find some examples using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioWorkletProcessor"><code>AudioWorkletProcessor</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioWorkletNode"><code>AudioWorkletNode</code></a> along with the <code>essentia-module.js</code> build <a href="https://github.com/MTG/essentia.js/tree/master/examples/audio-worklets">here</a>.</p>
<p>Â </p>
</article>

</section>

</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Essentia.html">Essentia</a></li><li><a href="EssentiaExtractor.html">EssentiaExtractor</a></li><li><a href="EssentiaPlot.html">EssentiaPlot</a></li><li><a href="PlotHeatmap.html">PlotHeatmap</a></li><li><a href="PlotMelodyContour.html">PlotMelodyContour</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-1. Getting Started.html">1. Getting Started</a></li><li><a href="tutorial-2. Building and Installing.html">2. Building and Installing</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Thu Mar 19 2020 18:06:43 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>