<html lang="">
  <script>
    var Module = {
      onRuntimeInitialized: function() {
        console.log('squareTest result: ' + Module.squareTest(2));
        var myVector = new Module.VectorFloat();
        myVector.push_back(101);
        console.log('first element vector: ' + myVector.get(0));
      }
    }; 
  </script> 
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Edit your site info here -->
    <meta name="essentiamin.js" content="WASM demo for essentiamin">

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css"/>
    <link rel="stylesheet" type="text/css" href="src/css/main.css"/>

    <title>wasm-demo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
    <script src="build/boxnew.js"></script>
    <script src="src/js/bindings.js"></script>
    <script src="src/js/examples.js"></script>
    <script>

      // 20 mb file upload limit
      FILE_UPLOAD_LIMIT = 20;

      $(document).ready(function () {
            $('#recordButton').click(function () {
                recordStop();
            });
            $('#file-menu').change(function () {
                uploadAudioFileFromMenu($("#file-menu"), 'popup');
            });
            $('#file-uploader').on(
                'dragover',
                function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                }
            )
            $('#file-uploader').on(
                'dragenter',
                function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                }
            )
            $('#file-uploader').on(
                'drop',
                function (e) {
                    if (e.originalEvent.dataTransfer) {
                        if (e.originalEvent.dataTransfer.files.length) {
                            e.preventDefault();
                            e.stopPropagation();
                            /*UPLOAD FILES HERE*/
                            uploadAudioFileFromMenu(e.originalEvent.dataTransfer.files[0], 'dragndrop');
                        }
                    }
                }
            );

            // addSourceToAudioPlayer(sampleFreesoundUri);
        });
    </script> 
  </head>
  <body>  

    <div class="ui main_wrapper landing-image">

    <div class="ui header">
        <div class="ui eight column grid">

            <div class="two column row">

            </div>

            <div class="eight wide centered column" style="margin-bottom: 40px;">
                <center><h1 class="ui huge header white-text">essentiamin.js demos </h1></center>
            </div>

        </div>
    </div>

    <br>

    <div class="body-container">

        <div class="ui two column grid container content-container">

            <div id="control_btns" class="control_btns six wide left aligned column">

                <div class="ui horizontal divider" style="color: papayawhip;">OR</div>

                <div class="ui basic centered grid">
                    <div class="ui vertical buttons row">
                        <button id="recordButton" class="ui vertical red inverted big button record-button">Record
                            &nbsp;&nbsp;<i class="microphone icon"></i></button>
                    </div>
                </div>

                <div class="ui horizontal divider" style="color: papayawhip;">OR</div>

                <div class="ui basic segment row">
                    <div class="ui-widget" id="file-uploader">
                        <p style="position:absolute; padding: 12px; width:85%;"><br><br>Drag a file or click to select a file from your computer</p>
                        <input type="file" id="file-menu"/>
                    </div>
                </div>
                <div class="ui left basic row segment">
                    <p hidden id="status_demo" class="white-text"><span id="update_status"></span></p>
                </div>
            </div>

            <div id="results" class="ui ten wide column basic segment result-segment">
                <div class="ui row" style="margin-bottom: 40px;">
                    <center>
                        <audio hidden id="audio-div" controls>
                            <source id="audio-source" src="" type="audio/wav"/>
                        </audio>
                    </center>
                </div>
                <div class="ui row">
                    <center><p id="results_title" class="large-text white-text"></p></center>
                    <br>
                    <div id="loader" class="ui text loader white-text">Loading</div>
                    <canvas id="myChart"></canvas>
                </div>
            </div>

        </div>

        <br>

        <center>
        <div class="footer">
            <a class="demo_logo" target="_blank" href="//essentia.upf.edu">
                <img id="logo" src="https://essentia.upf.edu/documentation/_static/essentia_logo.svg" alt="MTG Logo"
                     style="margin-left: 40px; height: 70px;">
            </a>
            <a target="_blank" href="https://www.upf.edu/web/mtg">
                <img class="essnt-footer__mtg-logo" src="https://mtg.github.io/assets/img/upflogo.png" alt="mtg logo"
                     style="width:300px; height: 70px;">
            </a>
        </div>
        </center>

    </div>

</div>   
  </body>
</html>